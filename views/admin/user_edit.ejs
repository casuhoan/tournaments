<%- include('../partials/header') %>

    <div class="glass-panel">
        <h1><i class="fas fa-user-edit"></i> Modifica Utente: <%= targetUser.username %>
        </h1>

        <% if (typeof error !=='undefined' && error) { %>
            <div class="alert"
                style="background: rgba(255, 0, 0, 0.1); color: #ff6b6b; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                <%= error %>
            </div>
            <% } %>

                <form action="/admin/users/<%= targetUser.id %>/edit" method="POST" style="max-width: 500px;">
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" name="username" class="form-control" value="<%= targetUser.username %>"
                            required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" class="form-control" value="<%= targetUser.email %>" required>
                    </div>
                    <div class="form-group">
                        <label>Ruolo</label>
                        <select name="role" class="form-control">
                            <option value="player" <%=targetUser.role==='player' ? 'selected' : '' %>>Giocatore</option>
                            <option value="organizer" <%=targetUser.role==='organizer' ? 'selected' : '' %>
                                >Organizzatore</option>
                            <option value="admin" <%=targetUser.role==='admin' ? 'selected' : '' %>>Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Nuova Password (lascia vuoto per non cambiare)</label>
                        <input type="password" name="password" class="form-control">
                    </div>

                    <div style="display: flex; gap: 10px;">
                        <button type="submit" class="btn btn-primary">Salva Modifiche</button>
                        <a href="/admin/users" class="btn" style="background: grey; color: white;">Annulla</a>
                    </div>
                </form>
    </div>

    <%- include('../partials/footer') %>