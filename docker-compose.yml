version: '3.8'

services:
  web:
    # Costruisce l'immagine usando il Dockerfile nella directory corrente
    build: .
    # Nome del container
    container_name: tournament-manager-web
    # Mappa la porta 8000 del tuo computer alla porta 80 del container
    ports:
      - "8000:80"
    # Monta il volume per persistere i dati
    volumes:
      # Monta il volume 'app-data' nella cartella '/var/www/html/data' del container
      # In questo modo, i file JSON non verranno sovrascritti quando aggiorni il codice
      - app-data:/var/www/html/data
      # Monta il volume 'uploads-data' nella cartella '/var/www/html/uploads' del container
      # Questo assicura la persistenza degli avatar caricati dagli utenti
      - uploads-data:/var/www/html/uploads

# Definisce il volume nominato che verr√† usato per i dati
volumes:
  app-data:
    # Il driver 'local' significa che i dati saranno salvati sul tuo computer
    driver: local
  uploads-data:
    driver: local
